<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/head.ejs'); %>
</head>

<body class="container">

  <header>
    <%- include('partials/header'); %>
  </header><br><br>


  <main class="container-fluid">

        <section id="admin-panel">
    <h1>Panel de Administración</h1>

    
    <div>
     
      <a id="reserva" type="button" class="btn btn-primary"  href="/register">Agregar usuario</a>
      <a id="reserva" type="button" class="btn btn-primary"  href="/usuarios">Usuarios</a>
      
      <tbody id="tabla">
      <table class="table table-dark table-striped">
        
        <thead>
          <tr>
            <th style="display: none">ID</th>
            <th>Nombre</th>
            <th>Email</th>
            <th>Manzana</th>
            <th>Lote</th>
            <th>Isla</th>
            <th>Teléfono</th>
            <th>Rol</th>
            <th>Acción</th>
            
          </tr>  
          <tbody >
            
            <% if (Array.isArray(users) && users.length > 0) { %>
              <% users.forEach(usuarios=> { %>
                <tr>
                <td style="display: none"><%= usuarios.id %></td>
                <td><%= usuarios.nombre %></td>
                <td><%= usuarios.email %></td>
                <td><%= usuarios.manzana %></td>
                <td><%= usuarios.lote %></td>
                <td><%= usuarios.isla %></td>
                <td><%= usuarios.telefono %></td>
                <td><%= usuarios.rol %></td>
              
                    <td>
                      <form action="/usuarios/editar/<%= usuarios.id %>" method="POST">
                        <input type="hidden" name="_method" value="PUT">
                        <!-- Otros campos del formulario si es necesario -->
                        <button type="submit" class="btn btn-primary">Editar</button>
                    </form>
                    
                      
                      <form action="/usuarios/borrar/<%= usuarios.id %>" method="POST" onsubmit="return confirm('¿Estás seguro de borrar este usuario?')">
                        <input type="hidden" name="_method" value="DELETE">
                        <button type="submit" class="btn btn-danger">Borrar</button>
                    </form>
                    
                      
                    </td>
                  </tr>
                <% }); %>
                <% } else { %>
                  <tr>

                    
                    <td colspan="8">No hay datos de usuarios disponibles.</td>
                  </tr>
                <% } %>
              </tbody>
              
            </table>
            <div>
      <a id="reserva" type="button" class="btn btn-primary"  href="/reserva">Agregar Reservas</a>
      <a id="reserva" type="button" class="btn btn-primary"  href="/reservas">ver Reservas</a>
    </div>
      <table class="table table-dark table-striped">

              <thead>
                <tr>
                  <th>ID</th>
                  <th>Usuario</th>
                  <th>Fecha</th>
                  <th>Hora Inicio</th>
                  <th>Estado</th>
                  <th>Acción</th>
                </tr>
              </thead>
                      
              
                <tbody >
                  <% if (Array.isArray(reservations) && reservations.length > 0) { %>
                    <% reservations.forEach(reservations=> { %>
                      <tr>
                      <td><%= reservations.id %></td>
                      <td><%= reservations.id_usuario %></td>
                      <td><%= reservations.fecha %></td>
                      <td><%= reservations.hora_inicio %></td>
                      <td><%= reservations.estado %></td>
                      
                          <td>
                            <a id="reserva" type="button" class="btn btn-primary"  href="/reservas/editar/<%= reservations.id %>" method="PUT">editar</a>
                            <a id="reserva" type="button" class="btn btn-primary"  href="/reservas/borrar/<%= reservations.id %>"  method="DELETE">borrar</a>
                              
                          </td>
                        </tr>
                        <% }); %>
                        <% } else { %>
                          <tr>
                            <td colspan="8">No hay datos de reservas disponibles.</td>
                          </tr>
                        <% } %>
                    </tbody>
                
              </table>
          
         
    </div>
    
    </div>
  </section>

     
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
      </script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="<KEY>"
        crossorigin="anonymous"></script>
       <script src="../js/admin.js"></script>
       
  </main>


  <footer>

    <%- include('partials/footer'); %>
  </footer>
  
</body>

</html>